-------------------------------------------------------------------------------------------

ЧТО ЭТО ЗА ДИРЕКТОРИЯ?

-------------------------------------------------------------------------------------------

Это директория, где будут содержаться CHANGE-сценарии / патчи к БД.

-------------------------------------------------------------------------------------------

КОНВЕНЦИЯ ИМЕНОВАНИЯ:

-------------------------------------------------------------------------------------------

Файлы именуются по маске "{день}.{месяц}.{год}[-{номер}-{модификатор}]*.sql", где:
1. {день}                  = Число дня в месяце.
2. {месяц}                 = Номер месяца в году.
3. {год}                   = Четырехзначное значение года.
4. {номер} и {модификатор} = Индикатор индивидуального патча и порядка его применения.
                             Если оба показателя отсутствуют, то считается, что
                             сценарий затрагивает всю БД.
                             Если оба показателя присутствуют, то сценарий считается 
                             "субъективным патчем" и применяется в соответствующем порядке.
                             Эти величины связаны и не могут существовать отдельно.
                             У сценариев с одинаковой датой не может быть
                             одинаковых индикаторов порядка.

------------------------------------------------------------------------------------------

ПРИМЕРЫ ИМЕНОВАНИЯ:

------------------------------------------------------------------------------------------

01.01.2014.sql
    +
    |
    +---> Глобальный патч к БД: все изменения, начиная с 1 января 2014 года.

15.02.2014.sql
    +
    |
    +---> Глобальный патч к БД: все изменения, начиная с 15 февраля 2014 года.
          Применяется после 01.01.2014.sql.

15.02.2014-1-schedule.sql
    +
    |
    +---> Субъективный патч к расписанию от 15 февраля 2014 года.
          Применяется после 15.02.2014.sql

15.02.2014-2-journal.sql
    +
    |
    +---> Субъективный патч к журналу от 15 февраля 2014 года.
          Применяется после 15.02.2014-1-schedule.sql

------------------------------------------------------------------------------------------

КОНВЕНЦИЯ ОФОРМЛЕНИЯ:

------------------------------------------------------------------------------------------

1. Все файлы указывают в заголовке "USE Database;" для того, чтобы не допустить
   ошибочного толкования сервером СУБД.

2. Отдельные смысловые блоки инструкций, а также декларация структур и конструкций
   разделяются маркером в 2 * "-" + " " + 87 * "-",
   а так же 2 двумя пустыми строками до и после этого маркера.

3. Имена декларируемых переменных следует ВСЕГДА заключать в апострофы "`".

4. Псевдонимы (ALIAS`ы) должны использоваться повсеместно, даже в простых запросах.
   "Краткость - сестра таланта."

------------------------------------------------------------------------------------------

ПРИМЕР ОФОРМЛЕНИЯ:

------------------------------------------------------------------------------------------

-- ---------------------------------------------------------------------------------------

USE `School`;

-- ---------------------------------------------------------------------------------------

DELIMITER $$

-- ---------------------------------------------------------------------------------------

DROP PROCEDURE IF EXISTS `patch`();

CREATE PROCEDURE `patch`()
BEGIN
DECLARE `a` INT DEFAULT 0;

SELECT
	`t1`.`Column`
INTO
	`a`
FROM
	`Table1` as `t1`
ORDER BY
	`t1`.`Column` DESC
LIMIT
	1;

DELETE FROM
	`Table2` as `t2`
WHERE
	`t2`.`ID` = `a`;
END;

-- ---------------------------------------------------------------------------------------

DELIMITER ;

-- ---------------------------------------------------------------------------------------

CALL `patch`();

-- ---------------------------------------------------------------------------------------